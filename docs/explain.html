<!DOCTYPE html>
<html>

<head>
  <title>../dist/ariaMenu.dev.js | ExplainJS by grunt-explainjs</title>
  <link rel="stylesheet" type="text/css" href="css/unsemantic.css"/>
  <link rel="stylesheet" type="text/css" href="css/explain.css"/>
  <link href='http://fonts.googleapis.com/css?family=Inconsolata|Open+Sans:300italic,300,700' rel='stylesheet' type='text/css'>
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1" />
</head>

<body>
  <div class='page-menu'>
    <div class='grid-container'>
      <div class='grid-60 mobile-grid-100'>
        <a class='logo' href='http://www.explainjs.com'>ExplainJS</a> by <a class='logo' href='https://github.com/collinforrester/grunt-explainjs'>grunt-explainjs</a>
        
          for
          <a href='../dist/ariaMenu.dev.js' class='src-title'>../dist/ariaMenu.dev.js</a>
        
      </div>
    </div>
  </div>
  <div class='sections grid-container'>
    <div class='code-bg hide-on-mobile'>
    </div>
    <br />
    <br />
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>global jQuery: true</p> <p>jshint sub:true</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>(function ($) {
  'use strict';</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Returns true if the browser supports touch events</p> <p>@return {boolean}</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>  function supportsTouch() {
    return 'ontouchstart' in window || 'onmsgesturechange' in window;
  }
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>The menu class</p> <p>@param {HTMLElement} item</p> <p>@param {Array} [options]</p> <p>@constructor</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>  function AriaMenu(item, options) {
    this.settings = $.extend(this.defaults, options);
    this.$elem = $(item);
    this.init();
  }

  AriaMenu.prototype = {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Default settings  Single quoted keys are required for the google closure compiler:  http://closuretools.blogspot.de/2011/01/property-by-any-other-name-part-1.html</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    defaults: {
      'focusClass': 'menuitem-focus',
      'visibleMenuClass': 'show-menu',
      'closeDelay': 100
    },

    events: {
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Triggered if the users touches a link</p> <p>@param {jQuery.event=} event</p> <p>@this {HTMLElement} link</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      linkTouch: function (event) {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>prevent the link execution</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        event.preventDefault();
        var settings = event.data.settings;</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Get the links parent element</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        var $touchedListElement = $(this).parent();</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>If a sub menu can be found and the user didn&#39;t tap this list item item just before</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        if ($touchedListElement.find('>ul').length && !$touchedListElement.hasClass(settings['focusClass'])) {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>open the sub menu</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>          $(this).focus();</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>prevent phantom clicks</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>          preventPhantomClicks($(this));
        } else {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Fix IOS-double click issue  http://stackoverflow.com/questions/3038898/ipad-iphone-hover-problem-causes-the-user-to-double-click-a-link</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>          this.click();
        }
      },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Triggered if the user moves his mouse over a list item</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      listItemMouseOver: function () {
        $(this).focus();
      },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Triggered if the user moves his mouse away from a list item</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      listItemMouseOut: function () {
        if ($(this).is(':focus')) {
          $(this).blur();
        }
      },</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Triggered if a list item receives focus</p> <p>@param {jQuery.event=} event</p> <p>@this {HTMLElement}</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      listItemFocus: function (event) {
        var settings = event.data.settings;</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Stop hiding this element (clear timeout from listItemBlur)</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        debounce(this);
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Show the sub menus</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        $(this)
          .addClass(settings['focusClass'])
          .find('>ul')
          .addClass(settings['visibleMenuClass']);
      },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Triggered if the focus is lost</p> <p>@param {jQuery.event=} event</p> <p>@this {HTMLElement}</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      listItemBlur: function (event) {
        var settings = event.data.settings;
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Wait for a short moment and hide the sub menus</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        debounce(this, function () {
          $(this).removeClass(settings['focusClass'])
            .find('>ul')
            .removeClass(settings['visibleMenuClass']);
        }, settings['closeDelay']);
      },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Triggered if a key event bubbles to a root menu list item</p> <p>@param {jQuery.event=} event</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      keyDown: function (event) {
        var _this = event.data;
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Escape pressed:</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        if (event.which === 27) {
          event.preventDefault();</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Hide the menu</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>          _this.closeMenu();
        }</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Arrow keys pressed:</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        else if (event.which >= 37 && event.which <= 40) {
          _this.events.arrowKeyDown.apply(this, arguments);
        }
      },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Triggered if an arrow key event bubbles to a root menu list item</p> <p>@param {jQuery.event=} event</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      arrowKeyDown: function (event) {
        var _this = event.data;
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Usually the event target is the focused link - so we pick the  parent to get the active listElement</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        var $focusedListElement = $(event.target).closest('li'),</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Get the focused menu element</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>          $focusedMenu = $focusedListElement.closest('ul');
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Get the sub menu (if one exists)</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        var $subMenu = $focusedListElement.find('>ul');
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Get the parent element of the focused element (if one exists)</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        var $parentListElement = ($focusedListElement[0] === this) ? $() : $focusedMenu.closest('li'),</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Get the parent menu of the focused element (if one exists)</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>          $parentMenu = $parentListElement.parent();
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Create a virtual cursor with the position of the focused element</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        var virtualCursor = new VirtualCursor();</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Move the cursor over the current focused element</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        virtualCursor.moveOver($focusedListElement);
        virtualCursor.moveRelative(event.which, $focusedListElement.width(), $focusedListElement.height());
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Select the element below the virtual cursor</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        var $selectedListElement = $(virtualCursor.getElementBelowCursor('li')),
          selectedMenu = $selectedListElement.parent()[0] || false;
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Check if the virtual cursor selected a sibling menu item  or if the virtual cursor selected a sub menu</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        if ($focusedMenu[0] === selectedMenu || $subMenu[0] === selectedMenu) {
          if (_this.selectListElement($selectedListElement)) {
            event.preventDefault();
          }
        }</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Check if the virtual cursor selected a parent menu</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        else if ($parentMenu[0] === selectedMenu) {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Select the parent list element</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>          if (_this.selectListElement($parentListElement)) {
            event.preventDefault();
          }
        }
      }
    },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Plugin initialization</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    init: function () {
      this.setAriaRoles();
      this.$elem</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Listen to mouse and keyboard events</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        .on('focusin', 'li', this, this.events.listItemFocus)
        .on('focusout', 'li', this, this.events.listItemBlur)
        .on('mouseover', 'a', this, this.events.listItemMouseOver)
        .on('mouseout', 'a', this, this.events.listItemMouseOut)
        .on('keydown', '>li', this, this.events.keyDown)
        .on('touchend', 'a', this, this.events.linkTouch)</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Disable the css fallback</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        .removeClass('css-fallback')</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Add aria-menu class</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        .addClass('aria-menu')</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Touch support</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        .addClass((supportsTouch() ? 'has' : 'no') + '-touch');

    },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Helper function</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    find: function (selector) {
      return this.$elem.find(selector);
    },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Sets the focus to the first visible anchor child in this list element.  The element might be an <code>ul</code> or a <code>li</code> element containing an <code>a</code> anchor.</p> <p>@param {jQuery} $element</p> <p>@returns {boolean}</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    selectListElement: function ($element) {
      return $element</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Find the <code>a</code> tag starting from the <code>ul</code> or <code>li</code>:</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        .find('>li>a, >a')</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>make sure that the anchor is visible</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        .filter(':visible:first')</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>set the focus</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        .focus()</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>as the filter selects only the first element the length  can be either 0 or 1</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        .length === 1;
    },

</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Add Aria roles and poperties  http://http://www.w3.org/TR/wai-aria/</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    setAriaRoles: function () {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Add ARIA role to menu bar  http://www.w3.org/TR/wai-aria/roles#menubar</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      this.$elem.attr('role', 'menubar');
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Add ARIA role to menu items  http://www.w3.org/TR/wai-aria/roles#menuitem</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      this.find('li').attr('role', 'menuitem');

      this.find('a+ul')</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Adding aria-haspopup for appropriate items  http://www.w3.org/TR/wai-aria/states<em>and</em>properties#aria-haspopup</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        .each(function () {
          $(this).prev('a').attr('aria-haspopup', 'true');
        });
    },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Closes the menu by removing the focus</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    closeMenu: function () {
      this.$elem.find(':focus').blur();
    }
  };
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>A virtual mouse cursor  which helps to support keyboard navigation</p> <p>@constructor</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>  function VirtualCursor() {
    this.left = 0;
    this.top = 0;
  }

  VirtualCursor.prototype = {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Move the virtual cursor over the center of the given target</p> <p>@param {HTMLElement|jQuery} target</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    moveOver: function (target) {
      var $target = $(target),
        $document = $(document);
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Set left and top value</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      $.extend(this, $target.offset());
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Move virtual cursor to the middle of the focused element  relative to the current scroll position</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      this.top += 0.5 * $target.height() - $document.scrollTop();
      this.left += 0.5 * $target.width() - $document.scrollLeft();
    },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Moves the curse relative to the last position</p> <p>@param direction {number} 37|38|39|40 Direction constant - as in the key code map  https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent#Virtual<em>key</em>codes  DOM<em>VK</em>LEFT   0x25 (37)  Left arrow.  DOM<em>VK</em>UP     0x26 (38)  Up arrow.  DOM<em>VK</em>RIGHT  0x27 (39)  Right arrow.  DOM<em>VK</em>DOWN   0x28 (40)  Down arrow.</p> <p>@param x {number}</p> <p>@param y {number}</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    moveRelative: function (direction, x, y) {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>{left} or {right} key pressed</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      if (direction === 37 || direction === 39) {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Move the virtual cursor horizontally  event.which - 38 = -1 || +1</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        this.left += (direction - 38) * x;
      }</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>{up} or {bottom} key pressed</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>      else {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Move the virtual cursor vertically  event.which - 39 = -1 || +1</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        this.top += (direction - 39) * y;
      }
    },
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Return the element at the current courser position</p> <p>@param {string} [selector]</p> <p>@returns {jQuery}</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    getElementBelowCursor: function (selector) {
      var $element = $(document.elementFromPoint(this.left, this.top));
      if (selector) {
        $element = $element.closest(selector);
      }
      return $element;
    }
  };
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Execute a function once per element after a given delay</p> <p>@param {HTMLElement|jQuery} element</p> <p>@param {function()=} [callback]</p> <p>@param {number=} [delay]</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>  function debounce(element, callback, delay) {
    clearTimeout(Number($(element).data('am-delay')));
    if (callback && delay) {
      $(element).data('am-delay', setTimeout($.proxy(callback, element), delay));
    }
  }
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Prevent Android from triggering buggy phantom clicks  http://stackoverflow.com/questions/2987706/touchend-event-doesnt-work-on-android  http://stackoverflow.com/questions/17352865/preventdefault-not-stopping-mouseup-event-on-android/19717278  http://jsfiddle.net/FjuHu/6/</p> <p>@param {jQuery} $element</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>  function preventPhantomClicks($element) {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>Click catcher</p> <p>@param {!jQuery.event=} event</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    function preventHandler(event) {
      event.preventDefault();
    }
</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>catch all events for the next 350ms</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>    $element.on('click', preventHandler);
    setTimeout(function () {
      $element.off('click', preventHandler);
    }, 350);
  }

</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>jQuery plugin interface  Use quoted notation for the closure compiler ADVANCED_OPTIMIZATIONS mode</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>  $['fn']['ariaMenu'] = function (opt) {
    return this.each(function () {
      var item = $(this), instance = item.data('AriaMenu');
      if (!instance) {</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
      <div class='section'>
        <div class='comment grid-40 mobile-grid-100 not-empty'>
          <p>create plugin instance and save it in data</p>
        </div>
        <div class='code grid-60 mobile-grid-100 not-empty'>
          <pre>        item.data('AriaMenu', new AriaMenu(this, opt));
      }
    });
  };


}(jQuery));.</pre>
        </div>
      </div>
      <div class='clear'>
      </div>
    
  </div>
</body>
</html>
