/*
 Copyright (c) 2013 Jan Nicklas Released under MIT license */
function g(c){function f(a,b){this.c=c.extend(this.f,b);this.b=c(a);this.h()}function h(){this.top=this.left=0}f.prototype={f:{focusClass:"menuitem-focus",focusedSubMenuClass:"show-menu",closeDelay:100},a:{m:function(){c(this).focus()},l:function(){c(this).is(":focus")&&c(this).blur()},k:function(a){a=a.data.c;c(this).stop().addClass(a.focusClass).find(">ul").addClass(a.focusedSubMenuClass).attr("aria-hidden",!1)},j:function(a){var b=a.data.c;c(this).stop().delay(b.closeDelay).queue(function(a){c(this).removeClass(b.focusClass).find(">ul").removeClass(b.focusedSubMenuClass).attr("aria-hidden",
!0);a()})},i:function(a){var b=a.data;27===a.which?(a.preventDefault(),b.e()):37<=a.which&&40>=a.which&&b.a.d.apply(this,arguments)},d:function(a){var b=c(a.target).closest("li"),d=b.width(),f=b.height(),k=b.closest("ul"),l=b[0]===this?c():k.closest("li"),n=l.parent(),m=b.find(">ul"),e=new h;e.n(b);39===a.which?e.left+=d:40===a.which?e.top+=f:37===a.which?e.left-=d:e.top-=f;b=c(e.g("li"));d=b.parent()[0]||!1;k[0]===d?(b.find(">a").focus(),a.preventDefault()):m[0]===d?(m.find(">li>a").first().focus(),
a.preventDefault()):n[0]===d&&(l.find(">a").focus(),a.preventDefault())}},h:function(){this.o();this.b.on("focusin","li",this,this.a.k).on("focusout","li",this,this.a.j).on("mouseover","a",this,this.a.m).on("mouseout","a",this,this.a.l).on("keydown",">li",this,this.a.i).removeClass("css-fallback").addClass("aria-menu")},find:function(a){return this.b.find(a)},o:function(){this.b.attr("role","menubar");this.find("li").attr("role","menuitem");this.find("a+ul").attr({"aria-hidden":"true",role:"menu"}).each(function(){c(this).prev("a").attr("aria-haspopup",
"true")})},e:function(){this.b.find(":focus").blur()}};h.prototype={n:function(a){a=c(a);var b=c(document);c.extend(this,a.offset());this.top+=0.5*a.height()-b.scrollTop();this.left+=0.5*a.width()-b.scrollLeft()},g:function(a){var b=c(document.elementFromPoint(this.left,this.top));a&&!b.is(a)&&(b=b.closest(a));return b||null}};c.fn.ariaMenu=function(a){return this.each(function(){var b=c(this),d=b.data("AriaMenu");d?"string"===typeof a&&(b=Array.prototype.slice.call(arguments,1),d[a].apply(d,b)):
b.data("AriaMenu",new f(this,a))})}}"function"===typeof define&&define.p?define(["jquery"],g):g(jQuery);