/*! Copyright (c) 2013 Jan Nicklas Released under MIT license */(function(){function h(c){function g(a,b){this.d=c.extend(this.g,b);this.b=c(a);this.i()}function k(){this.top=this.left=0}g.prototype={g:{focusClass:"menuitem-focus",focusedSubMenuClass:"show-menu",closeDelay:100},a:{n:function(){c(this).focus()},m:function(){c(this).is(":focus")&&c(this).blur()},l:function(a){a=a.data.d;c(this).stop().addClass(a.focusClass).find(">ul").addClass(a.focusedSubMenuClass).attr("aria-hidden",!1)},k:function(a){var b=a.data.d;c(this).stop().delay(b.closeDelay).queue(function(a){c(this).removeClass(b.focusClass).find(">ul").removeClass(b.focusedSubMenuClass).attr("aria-hidden",
!0);a()})},j:function(a){var b=a.data;27===a.which?(a.preventDefault(),b.f()):37<=a.which&&40>=a.which&&b.a.e.apply(this,arguments)},e:function(a){var b=a.data,d=c(a.target).closest("li"),f=d.width(),g=d.height(),l=d.closest("ul"),m=(d[0]===this?c():l.closest("li")).parent(),n=d.find(">ul"),e=new k;e.o(d);39===a.which?e.left+=f:40===a.which?e.top+=g:37===a.which?e.left-=f:e.top-=g;d=c(e.h("li"));f=d.parent()[0]||!1;l[0]===f?b.c(d)&&a.preventDefault():n[0]===f?b.c(d)&&a.preventDefault():m[0]===f&&
b.c(d)&&a.preventDefault()}},i:function(){this.p();this.b.on("focusin","li",this,this.a.l).on("focusout","li",this,this.a.k).on("mouseover","a",this,this.a.n).on("mouseout","a",this,this.a.m).on("keydown",">li",this,this.a.j).removeClass("css-fallback").addClass("aria-menu")},find:function(a){return this.b.find(a)},c:function(a){return 1===a.find(">li>a, >a").filter(":visible:first").focus().length},p:function(){this.b.attr("role","menubar");this.find("li").attr("role","menuitem");this.find("a+ul").attr({"aria-hidden":"true",
role:"menu"}).each(function(){c(this).prev("a").attr("aria-haspopup","true")})},f:function(){this.b.find(":focus").blur()}};k.prototype={o:function(a){a=c(a);var b=c(document);c.extend(this,a.offset());this.top+=0.5*a.height()-b.scrollTop();this.left+=0.5*a.width()-b.scrollLeft()},h:function(a){var b=c(document.elementFromPoint(this.left,this.top));a&&(b=b.closest(a));return b}};c.fn.ariaMenu=function(a){return this.each(function(){var b=c(this);b.data("AriaMenu")||b.data("AriaMenu",new g(this,a))})}}
"function"===typeof define&&define.amd?define(["jquery"],h):h(jQuery);})();
